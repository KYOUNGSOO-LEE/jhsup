{% extends "base.html" %}
{% block title %} 지역별 통계 {% endblock %}

{% block head %}
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'student_region');
        data.addColumn('number', 'student_region_freq');
        data.addRows({{student_region_data_list | safe}});

        // Set chart options
        var options = {'title':'지역별 사례 수',
                       'width':500,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('student_region_chart1'));
        chart.draw(data, options);
      }
    </script>

    <script>
      google.charts.load('current', {packages: ['corechart', 'bar']});
      google.charts.setOnLoadCallback(drawStacked);

      function drawStacked() {
            var data = google.visualization.arrayToDataTable({{univ_psf_list|safe}});

            var options = {
              title: 'Population of Largest U.S. Cities',
              chartArea: {width: '50%'},
              isStacked: true,
              hAxis: {
                title: '인원',
                minValue: 0,
              },
              vAxis: {
                title: '대학명'
              }
            };
            var chart = new google.visualization.BarChart(document.getElementById('student_region_chart2'));
            chart.draw(data, options);
          }
    </script>

{% endblock %}

{% block content %}

<h4> 지역별 통계 </h4>
<p class="font-weight-bold text-info">
    &#8251 기준 : 인문, 예체능(국영수사100), 자연(국영수과100), 공통(국영수사과100)<br>
</p>

<form method="get" action="{% url request.resolver_match.url_name %}">
  <div class="form-row align-items-center">

    <div class="col-md-1 my-1">
      <select class="custom-select mr-sm-2" id="entrance_year" name="entrance_year">
        {% for item in entrance_year_item %}
          <option value="{{item.entrance_year}}" {% if item.entrance_year == current_entrance_year %} selected {% endif %}>{{item.entrance_year}}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-auto my-1">
      <button type="submit" class="btn btn-warning">검색</button>
    </div>

  </div>
</form>
<hr/>
<br>

<div class="container">
  <div class="row">
    <div class="col">
      <div id="student_region_chart1"></div>
    </div>
    <div class="col" style="width: 70%; height: 100%;">
    </div>
  </div>
</div>

<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="{% if current_region == '충청도' %}nav-link active{%else%}nav-link{% endif %}"
       href="{% url 'static_student_region_result' %}?entrance_year={{ current_entrance_year }}&student_region=충청도">충청도</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_region == '대전' %}nav-link active{%else%}nav-link{% endif %}"
       href="{% url 'static_student_region_result' %}?entrance_year={{ current_entrance_year }}&student_region=대전">대전</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_region == '세종' %}nav-link active{%else%}nav-link{% endif %}"
       href="{% url 'static_student_region_result' %}?entrance_year={{ current_entrance_year }}&student_region=세종">세종</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_region == '충남' %}nav-link active{%else%}nav-link{% endif %}"
       href="{% url 'static_student_region_result' %}?entrance_year={{ current_entrance_year }}&student_region=충남">충남</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_region == '충북' %}nav-link active{%else%}nav-link{% endif %}"
       href="{% url 'static_student_region_result' %}?entrance_year={{ current_entrance_year }}&student_region=충북">충북</a>
  </li>
</ul>
<br>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<div id="student_region_chart2"></div>

{% endblock content %}