{% extends "base.html" %}
{% block title %} 계열기준 {% endblock %}

{% block head %}
 <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable({{grade_column1|safe}});

        var view = new google.visualization.DataView(data);

        var options = {
          width: 550,
          height: 300,
          bar: {groupWidth: "50%"},
          legend: { position: "none" },
        };
        var chart = new google.visualization.ColumnChart(document.getElementById("grade_column1"));
        chart.draw(view, options);
      }
    </script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['table']});
      google.charts.setOnLoadCallback(drawTable);

      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', '전형');
        data.addColumn('number', '1');
        data.addColumn('number', '2');
        data.addColumn('number', '3');
        data.addColumn('number', '4');
        data.addColumn('number', '5');
        data.addColumn('number', '6');
        data.addColumn('number', '7');
        data.addColumn('number', '8');
        data.addColumn('number', '합');

        data.addRows({{grade_column1_table|safe}});

        var options = {
            width: 350,
            height: 300,
            showRowNumber: false,
            allowHtml: true,
        };

        var table = new google.visualization.Table(document.getElementById('grade_column1_table'));
        table.draw(data, options);
      }
    </script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', '지역');
        data.addColumn('number', '지원');
        data.addRows({{univ_region_pie | safe}});

        // Set chart options
        var options = {
            width: 550,
            height: 600,
            legend: { position: 'top', maxLines: 5 },
            pieSliceText: 'label',
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('univ_region_pie'));
        chart.draw(data, options);
      }
    </script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['table']});
      google.charts.setOnLoadCallback(drawTable);

      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', '지역');
        data.addColumn('number', '지원');
        data.addColumn('number', '지원비율(%)');
        data.addRows({{univ_region_table | safe}});

        var options = {
            width: 350,
            height: 600,
            showRowNumber: false,
            allowHtml: true,
        };

        var table = new google.visualization.Table(document.getElementById('univ_region_table'));
        table.draw(data, options);
      }
    </script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', '전형');
        data.addColumn('number', '지원');
        data.addRows({{admission1_pie | safe}});

        // Set chart options
        var options = {
            width: 550,
            height: 400,
            legend: { position: 'top', maxLines: 3 },
            pieSliceText: 'label',
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('admission1_pie'));
        chart.draw(data, options);
      }
    </script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['table']});
      google.charts.setOnLoadCallback(drawTable);

      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', '전형');
        data.addColumn('number', '지원');
        data.addColumn('number', '지원비율(%)');
        data.addRows({{admission1_table | safe}});

        var options = {
            width: 350,
            height: 400,
            showRowNumber: false,
            allowHtml: true,
        };

        var table = new google.visualization.Table(document.getElementById('admission1_table'));
        table.draw(data, options);
      }
    </script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable({{admission1_column|safe}});

        var options = {
          width: 500,
          height: 400,
          legend: { position: 'top', maxLines: 3 },
          bar: {groupWidth: "50%"},
          colors:['#F15F5F', '#3DB7CC', '#FAF4C0'],
          isStacked: true,
        };
        var chart = new google.visualization.ColumnChart(document.getElementById("admission1_column"));
        chart.draw(data, options);
    }
    </script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['table']});
      google.charts.setOnLoadCallback(drawTable);

      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', '전형');
        data.addColumn('number', '합격');
        data.addColumn('number', '충원합격');
        data.addColumn('number', '불합격');
        data.addRows({{admission1_table2 | safe}});

        var options = {
            width: 350,
            height: 400,
            showRowNumber: false,
            allowHtml: true,
        };

        var table = new google.visualization.Table(document.getElementById('admission1_table2'));
        table.draw(data, options);
      }
    </script>

{% endblock %}

{% block content %}

<h4> 계열기준 </h4>
<p class="font-weight-bold text-info">
    &#8251 기준 : 인문, 예체능(국영수사100), 자연(국영수과100), 공통(국영수사과100)<br>
</p>

<form method="get" action="{% url 'major_group_result' %}">
  <div class="form-row align-items-center">

    <div class="col-md-1 my-1">
      <select class="custom-select mr-sm-2" id="entrance_year" name="entrance_year">
        {% for item in entrance_year_item %}
          <option value="{{item.entrance_year}}" {% if item.entrance_year == current_entrance_year %} selected {% endif %}>{{item.entrance_year}}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-1 my-1">
      <select class="custom-select mr-sm-2" id="major_group" name="major_group">
        {% for item in major_group_item %}
          <option value="{{item.pk}}" {% if item.pk == current_major_group %} selected {% endif %}>{{item.major_group}}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-auto my-1">
      <button type="submit" class="btn btn-warning">검색</button>
    </div>

  </div>
</form>

<hr/>
<h6>{{current_entrance_year}} {{current_major_group_str}}계열 등급별 지원분포</h6>
<div class="container">
  <div class="row">
    <div class="col">
      <div id="grade_column1"></div>
    </div>
    <div class="col">
      <div id="grade_column1_table"></div>
    </div>
  </div>
</div>

<hr/>
<h6>{{current_entrance_year}} {{current_major_group_str}}계열 지역별 지원율</h6>
<div class="container">
  <div class="row">
    <div class="col">
      <div id="univ_region_pie"></div>
    </div>
    <div class="col">
      <div id="univ_region_table"></div>
    </div>
  </div>
</div>

<hr/>
<h6>{{current_entrance_year}} {{current_major_group_str}}계열 전형별 지원율 및 합격률</h6>
<div class="container">
  <div class="row">
    <div class="col">
      <div id="admission1_pie"></div>
    </div>
    <div class="col">
      <div id="admission1_table"></div>
    </div>
  </div>
</div>

<br><br>
<div class="container">
  <div class="row">
    <div class="col">
      <div id="admission1_column"></div>
    </div>
    <div class="col">
      <div id="admission1_table2"></div>
    </div>
  </div>
</div>

{% endblock content %}