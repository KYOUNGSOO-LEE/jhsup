{% extends "base.html" %}
{% block title %} 등급별 합불통계 {% endblock %}

{% block head %}

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable({{grade_data_list|safe}});

        var view = new google.visualization.DataView(data);

        var options = {
          title: "등급별 사례 분포",
          width: 800,
          height: 400,
          bar: {groupWidth: "80%"},
          legend: { position: "none" },
        };
        var chart = new google.visualization.ColumnChart(document.getElementById("grade_column"));
        chart.draw(view, options);
    }
    </script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {packages: ['corechart', 'bar']});
      google.charts.setOnLoadCallback(drawStacked);

      function drawStacked() {
            var data = google.visualization.arrayToDataTable({{univ_psf_list|safe}});

            // set inner height to 30 pixels per row
            var chartAreaHeight = data.getNumberOfRows() * 30;
            // add padding to outer height to accomodate title, axis labels, etc
            var chartHeight = chartAreaHeight + 100;

            var options = {
              title: '지원대학 사례',
              height: chartHeight,
              chartArea: {
                  height: chartAreaHeight
              },
              isStacked: true,
              bar: { groupWidth: "80%" },
              colors:['#F15F5F', '#3DB7CC', '#FAF4C0'],
              hAxis: {
                minValue: 0,
              },
              vAxis: {
              }
            };

            var chart = new google.visualization.BarChart(document.getElementById('grade_bar'));
            chart.draw(data, options);

            window.addEventListener('resize', function() {
                chart.draw(data, options);
            }, false);
      }
    </script>

{% endblock %}

{% block content %}

<h4> 등급별 합불통계 </h4>
<p class="font-weight-bold text-info">
    &#8251 기준 : 인문, 예체능(국영수사100), 자연(국영수과100), 공통(국영수사과100)<br>
</p>

<form method="get" action="{% url request.resolver_match.url_name %}">
  <div class="form-row align-items-center">

    <div class="col-md-1 my-1">
      <select class="custom-select mr-sm-2" id="entrance_year" name="entrance_year">
        {% for item in entrance_year_item %}
          <option value="{{item.entrance_year}}" {% if item.entrance_year == current_entrance_year %} selected {% endif %}>{{item.entrance_year}}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-1 my-1">
      <select class="custom-select mr-sm-2" id="major_group" name="major_group">
        {% for item in major_group_item %}
          <option value="{{item.pk}}" {% if item.pk == current_major_group %} selected {% endif %}>{{item.major_group}}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-1 my-1">
      <select class="custom-select mr-sm-2" id="admission1" name="admission1">
        {% for item in admission1_item %}
          <option value="{{item.admission1}}" {% if item.admission1 == current_admission1 %} selected {% endif %}>{{item.admission1}}</option>
        {% endfor %}
      </select>
    </div>

    <input type="hidden" id="gte" name="gte" value="1">
    <input type="hidden" id="lt" name="lt" value="2">

    <div class="col-auto my-1">
      <button type="submit" class="btn btn-warning">검색</button>
    </div>

  </div>
</form>

<hr/>

<div id="grade_column"></div>

<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="{% if current_gte == 1 %}nav-link active{%else%}nav-link{% endif %}" href="{% url 'static_grade_result' %}?entrance_year={{ current_entrance_year }}&major_group={{ current_major_group }}&admission1={{ current_admission1 }}&gte=1&lt=2">1등급대</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_gte == 2 %}nav-link active{%else%}nav-link{% endif %}" href="{% url 'static_grade_result' %}?entrance_year={{ current_entrance_year }}&major_group={{ current_major_group }}&admission1={{ current_admission1 }}&gte=2&lt=3">2등급대</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_gte == 3 %}nav-link active{%else%}nav-link{% endif %}" href="{% url 'static_grade_result' %}?entrance_year={{ current_entrance_year }}&major_group={{ current_major_group }}&admission1={{ current_admission1 }}&gte=3&lt=4">3등급대</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_gte == 4 %}nav-link active{%else%}nav-link{% endif %}" href="{% url 'static_grade_result' %}?entrance_year={{ current_entrance_year }}&major_group={{ current_major_group }}&admission1={{ current_admission1 }}&gte=4&lt=5">4등급대</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_gte == 5 %}nav-link active{%else%}nav-link{% endif %}" href="{% url 'static_grade_result' %}?entrance_year={{ current_entrance_year }}&major_group={{ current_major_group }}&admission1={{ current_admission1 }}&gte=5&lt=6">5등급대</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_gte == 6 %}nav-link active{%else%}nav-link{% endif %}" href="{% url 'static_grade_result' %}?entrance_year={{ current_entrance_year }}&major_group={{ current_major_group }}&admission1={{ current_admission1 }}&gte=6&lt=7">6등급대</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_gte == 7 %}nav-link active{%else%}nav-link{% endif %}" href="{% url 'static_grade_result' %}?entrance_year={{ current_entrance_year }}&major_group={{ current_major_group }}&admission1={{ current_admission1 }}&gte=7&lt=8">7등급대</a>
  </li>
  <li class="nav-item">
    <a class="{% if current_gte == 8 %}nav-link active{%else%}nav-link{% endif %}" href="{% url 'static_grade_result' %}?entrance_year={{ current_entrance_year }}&major_group={{ current_major_group }}&admission1={{ current_admission1 }}&gte=8&lt=9">8등급대</a>
  </li>
</ul>

<div id="grade_bar"></div>

{% endblock content %}